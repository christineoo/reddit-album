{"version":3,"sources":["webpack:///./node_modules/react-motion/lib/Motion.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_interopRequireDefault","obj","_mapToZero2","_stripStyle2","_stepper4","_performanceNow2","_raf2","_shouldStopAnimation2","_react2","_propTypes2","msPerFrame","Motion","_React$Component","_this","this","instance","TypeError","_classCallCheck","wasAnimating","animationID","prevTime","accumulatedTime","unreadPropStyle","clearUnreadPropStyle","destStyle","dirty","_state","state","currentStyle","currentVelocity","lastIdealStyle","lastIdealVelocity","styleValue","setState","startAnimationIfNecessary","timestamp","propsStyle","style","onRest","currentTime","timeDelta","currentFrameCompletion","Math","floor","framesToCatchUp","newLastIdealStyle","newLastIdealVelocity","newCurrentStyle","newCurrentVelocity","newLastIdealStyleValue","newLastIdealVelocityValue","_stepper","val","stiffness","damping","precision","_stepper2","nextIdealX","nextIdealV","defaultState","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","_inherits","defaultStyle","objectOf","number","oneOfType","object","isRequired","children","func","_props","componentDidMount","componentWillReceiveProps","componentWillUnmount","cancel","render","renderedChildren","Children","only","Component","module"],"mappings":"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","file":"main~dd952e99.37cdc92423baafc853c0.chunk.js","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _mapToZero = require('./mapToZero');\n\nvar _mapToZero2 = _interopRequireDefault(_mapToZero);\n\nvar _stripStyle = require('./stripStyle');\n\nvar _stripStyle2 = _interopRequireDefault(_stripStyle);\n\nvar _stepper3 = require('./stepper');\n\nvar _stepper4 = _interopRequireDefault(_stepper3);\n\nvar _performanceNow = require('performance-now');\n\nvar _performanceNow2 = _interopRequireDefault(_performanceNow);\n\nvar _raf = require('raf');\n\nvar _raf2 = _interopRequireDefault(_raf);\n\nvar _shouldStopAnimation = require('./shouldStopAnimation');\n\nvar _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar msPerFrame = 1000 / 60;\n\nvar Motion = (function (_React$Component) {\n  _inherits(Motion, _React$Component);\n\n  _createClass(Motion, null, [{\n    key: 'propTypes',\n    value: {\n      // TOOD: warn against putting a config in here\n      defaultStyle: _propTypes2['default'].objectOf(_propTypes2['default'].number),\n      style: _propTypes2['default'].objectOf(_propTypes2['default'].oneOfType([_propTypes2['default'].number, _propTypes2['default'].object])).isRequired,\n      children: _propTypes2['default'].func.isRequired,\n      onRest: _propTypes2['default'].func\n    },\n    enumerable: true\n  }]);\n\n  function Motion(props) {\n    var _this = this;\n\n    _classCallCheck(this, Motion);\n\n    _React$Component.call(this, props);\n    this.wasAnimating = false;\n    this.animationID = null;\n    this.prevTime = 0;\n    this.accumulatedTime = 0;\n    this.unreadPropStyle = null;\n\n    this.clearUnreadPropStyle = function (destStyle) {\n      var dirty = false;\n      var _state = _this.state;\n      var currentStyle = _state.currentStyle;\n      var currentVelocity = _state.currentVelocity;\n      var lastIdealStyle = _state.lastIdealStyle;\n      var lastIdealVelocity = _state.lastIdealVelocity;\n\n      for (var key in destStyle) {\n        if (!Object.prototype.hasOwnProperty.call(destStyle, key)) {\n          continue;\n        }\n\n        var styleValue = destStyle[key];\n        if (typeof styleValue === 'number') {\n          if (!dirty) {\n            dirty = true;\n            currentStyle = _extends({}, currentStyle);\n            currentVelocity = _extends({}, currentVelocity);\n            lastIdealStyle = _extends({}, lastIdealStyle);\n            lastIdealVelocity = _extends({}, lastIdealVelocity);\n          }\n\n          currentStyle[key] = styleValue;\n          currentVelocity[key] = 0;\n          lastIdealStyle[key] = styleValue;\n          lastIdealVelocity[key] = 0;\n        }\n      }\n\n      if (dirty) {\n        _this.setState({ currentStyle: currentStyle, currentVelocity: currentVelocity, lastIdealStyle: lastIdealStyle, lastIdealVelocity: lastIdealVelocity });\n      }\n    };\n\n    this.startAnimationIfNecessary = function () {\n      // TODO: when config is {a: 10} and dest is {a: 10} do we raf once and\n      // call cb? No, otherwise accidental parent rerender causes cb trigger\n      _this.animationID = _raf2['default'](function (timestamp) {\n        // check if we need to animate in the first place\n        var propsStyle = _this.props.style;\n        if (_shouldStopAnimation2['default'](_this.state.currentStyle, propsStyle, _this.state.currentVelocity)) {\n          if (_this.wasAnimating && _this.props.onRest) {\n            _this.props.onRest();\n          }\n\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.wasAnimating = false;\n          _this.accumulatedTime = 0;\n          return;\n        }\n\n        _this.wasAnimating = true;\n\n        var currentTime = timestamp || _performanceNow2['default']();\n        var timeDelta = currentTime - _this.prevTime;\n        _this.prevTime = currentTime;\n        _this.accumulatedTime = _this.accumulatedTime + timeDelta;\n        // more than 10 frames? prolly switched browser tab. Restart\n        if (_this.accumulatedTime > msPerFrame * 10) {\n          _this.accumulatedTime = 0;\n        }\n\n        if (_this.accumulatedTime === 0) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.startAnimationIfNecessary();\n          return;\n        }\n\n        var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;\n        var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);\n\n        var newLastIdealStyle = {};\n        var newLastIdealVelocity = {};\n        var newCurrentStyle = {};\n        var newCurrentVelocity = {};\n\n        for (var key in propsStyle) {\n          if (!Object.prototype.hasOwnProperty.call(propsStyle, key)) {\n            continue;\n          }\n\n          var styleValue = propsStyle[key];\n          if (typeof styleValue === 'number') {\n            newCurrentStyle[key] = styleValue;\n            newCurrentVelocity[key] = 0;\n            newLastIdealStyle[key] = styleValue;\n            newLastIdealVelocity[key] = 0;\n          } else {\n            var newLastIdealStyleValue = _this.state.lastIdealStyle[key];\n            var newLastIdealVelocityValue = _this.state.lastIdealVelocity[key];\n            for (var i = 0; i < framesToCatchUp; i++) {\n              var _stepper = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\n              newLastIdealStyleValue = _stepper[0];\n              newLastIdealVelocityValue = _stepper[1];\n            }\n\n            var _stepper2 = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\n            var nextIdealX = _stepper2[0];\n            var nextIdealV = _stepper2[1];\n\n            newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;\n            newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;\n            newLastIdealStyle[key] = newLastIdealStyleValue;\n            newLastIdealVelocity[key] = newLastIdealVelocityValue;\n          }\n        }\n\n        _this.animationID = null;\n        // the amount we're looped over above\n        _this.accumulatedTime -= framesToCatchUp * msPerFrame;\n\n        _this.setState({\n          currentStyle: newCurrentStyle,\n          currentVelocity: newCurrentVelocity,\n          lastIdealStyle: newLastIdealStyle,\n          lastIdealVelocity: newLastIdealVelocity\n        });\n\n        _this.unreadPropStyle = null;\n\n        _this.startAnimationIfNecessary();\n      });\n    };\n\n    this.state = this.defaultState();\n  }\n\n  Motion.prototype.defaultState = function defaultState() {\n    var _props = this.props;\n    var defaultStyle = _props.defaultStyle;\n    var style = _props.style;\n\n    var currentStyle = defaultStyle || _stripStyle2['default'](style);\n    var currentVelocity = _mapToZero2['default'](currentStyle);\n    return {\n      currentStyle: currentStyle,\n      currentVelocity: currentVelocity,\n      lastIdealStyle: currentStyle,\n      lastIdealVelocity: currentVelocity\n    };\n  };\n\n  // it's possible that currentStyle's value is stale: if props is immediately\n  // changed from 0 to 400 to spring(0) again, the async currentStyle is still\n  // at 0 (didn't have time to tick and interpolate even once). If we naively\n  // compare currentStyle with destVal it'll be 0 === 0 (no animation, stop).\n  // In reality currentStyle should be 400\n\n  Motion.prototype.componentDidMount = function componentDidMount() {\n    this.prevTime = _performanceNow2['default']();\n    this.startAnimationIfNecessary();\n  };\n\n  Motion.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {\n    if (this.unreadPropStyle != null) {\n      // previous props haven't had the chance to be set yet; set them here\n      this.clearUnreadPropStyle(this.unreadPropStyle);\n    }\n\n    this.unreadPropStyle = props.style;\n    if (this.animationID == null) {\n      this.prevTime = _performanceNow2['default']();\n      this.startAnimationIfNecessary();\n    }\n  };\n\n  Motion.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this.animationID != null) {\n      _raf2['default'].cancel(this.animationID);\n      this.animationID = null;\n    }\n  };\n\n  Motion.prototype.render = function render() {\n    var renderedChildren = this.props.children(this.state.currentStyle);\n    return renderedChildren && _react2['default'].Children.only(renderedChildren);\n  };\n\n  return Motion;\n})(_react2['default'].Component);\n\nexports['default'] = Motion;\nmodule.exports = exports['default'];\n\n// after checking for unreadPropStyle != null, we manually go set the\n// non-interpolating values (those that are a number, without a spring\n// config)"],"sourceRoot":""}